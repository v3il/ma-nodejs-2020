// –ù–∞–ø–∏—Å–∞—Ç–∏ CLI tool (–∫–æ–Ω—Å–æ–ª—å–Ω—É —É—Ç–∏–ª—ñ—Ç—É) –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –∑–∞–ø–æ–≤–Ω–µ–Ω–æ—Å—Ç—ñ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–º'—è—Ç—ñ.
// –ü—Ä–æ–≥—Ä–∞–º–∞ –º–∞—î –≤–∏–¥–∞–≤–∞—Ç–∏ 4 –∑–Ω–∞—á–µ–Ω–Ω—è –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª (–¥–∏–≤. —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏ –Ω–∏–∂—á–µ) —É –º–µ–≥–∞–±–∞–π—Ç–∞—Ö –æ–∫—Ä—É–≥–ª–µ–Ω–∏—Ö –¥–æ —Ç–∏—Å—è—á–Ω–∏—Ö (—Ç—Ä–∏ –∑–Ω–∞–∫–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏):
// - –∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞–º'—è—Ç—ñ –≤ —Å–∏—Å—Ç–µ–º—ñ,
// - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—ó –≤—ñ–ª—å–Ω–æ—ó –ø–∞–º'—è—Ç—ñ,
// - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–π–Ω—è—Ç–æ—ó –ø–∞–º'—è—Ç—ñ,
// - —Ä—ñ–∑–Ω–∏—Ü—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–π–Ω—è—Ç–æ—ó –ø–∞–º'—è—Ç—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑–∞–º—ñ—Ä—É —É –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –∑–∞–º—ñ—Ä–æ–º (delta).
// –£—Ç–∏–ª—ñ—Ç–∞ –º–∞—î –æ—á–∏—â–∞—Ç–∏ –∫–æ–Ω—Å–æ–ª—å, –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∑–∞–º—ñ—Ä–∏ —ñ –≤–∏–≤–æ–¥–∏—Ç–∏ –Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –∑–∞–¥–∞–Ω–æ–º—É —Å—Ç–∞–ª–æ–º—É —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ.
//
//     –£ —è–∫–æ—Å—Ç—ñ –≤—Ö—ñ–¥–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ø—Ä–æ–≥—Ä–∞–º–∞ –º–∞—î –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –ø—Ä–∏–π–º–∞—Ç–∏ —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è (env vars). –ü—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –±—É–¥—å-—è–∫–æ–≥–æ –∑ —Ü–∏—Ö —Ç—Ä—å–æ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –º–∞—î –±—Ä–∞—Ç–∏—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:
//     - RATE - —ñ–Ω—Ç–µ—Ä–≤–∞–ª –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–º—ñ—Ä—ñ–≤ –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 1000),
// - LIMIT - –∑–Ω–∞—á–µ–Ω–Ω—è –º–µ–∂—ñ —ñ–Ω—Ñ–æ—Ä–º—É–≤–∞–Ω–Ω—è –ø—Ä–æ –º–∞–ª—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–ª—å–Ω–æ—ó –ø–∞–º'—è—Ç—ñ –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 300),
// - COLOR - –ø–µ—Ä–µ–º–∏–∫–∞—á (true –∞–±–æ false) –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–æ—é –∫–æ–ª—å–æ—Ä–æ–≤–æ–≥–æ –≤–∏–≤–µ–¥–µ–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º true).
//
// –ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –ø—Ä–æ–≥—Ä–∞–º–∞ —Ç–∞–∫–æ–∂ –º–∞—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å (—â–æ –π –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º) –≤–∏–≤–æ–¥–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è delta —Ç–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–ª—å–Ω–æ—ó –ø–∞–º'—è—Ç—ñ –ø–µ–≤–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ —É–º–æ–≤–∞–º–∏ (–¥–∏–≤. —Å–∫—Ä—ñ–Ω—à–æ—Ç–∏ –Ω–∏–∂—á–µ):
// - –ü—Ä–∏ –≤—ñ–¥'—î–º–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–Ω—ñ, delta –≤–∏–≤–æ–¥–∏—Ç—å—Å—è —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, —ñ–Ω–∞–∫—à–µ ‚Äî –∑–µ–ª–µ–Ω–∏–º.
// - –Ø–∫—â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–ª—å–Ω–æ—ó –ø–∞–º'—è—Ç—ñ –º–µ–Ω—à–µ –∑–∞–¥–∞–Ω–æ–≥–æ –ª—ñ–º—ñ—Ç—É, —Ç–æ —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è –º–∞—î –≤–∏–≤–æ–¥–∏—Ç–∏—Å—å —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º, –∞ –∑–Ω–∏–∑—É –º–∞—î –∑'—è–≤–ª—è—Ç–∏—Å—å –¥–æ–¥–∞—Ç–∫–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º:
//     !!! ATTENTION: Available memory is under the defined limit !!!
//
//     –ü—Ä–∏–∫–ª–∞–¥–∏ —Ä—è–¥–∫—É –∑–∞–ø—É—Å–∫—É —É—Ç–∏–ª—ñ—Ç–∏:
//     $ RATE=500 LIMIT=100 node app.js
// (–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=500, LIMIT=100, COLOR=true)
// $ COLOR=false node app.js
// (–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=1000, LIMIT=300, COLOR=false)
// $ COLOR=true LIMIT=1000 node app.js
// (–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=1000, LIMIT=1000, COLOR=true)
//
// –ü—Ä–æ–≥—Ä–∞–º–∞ –Ω–µ –º–∞—î –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–∏—Ö —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫, –ª–∏—à–µ –≤–±—É–¥–æ–≤–∞–Ω—ñ –º–æ–¥—É–ª—ñ Node.js, —â–æ –º–∏ —Ä–æ–∑–≥–ª—è–¥–∞–ª–∏ –ø—ñ–¥ —á–∞—Å –∑—É—Å—Ç—Ä—ñ—á—ñ. üôÇ
// –í –∫–æ–¥—ñ —É –≤–∞—Å –±—É–¥–µ –ª–∏—à–µ –æ–¥–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω–Ω—è require('os') —ñ –≤—Å–µ.
//     –¢–µ, —â–æ –≤–∏–≤–æ–¥–∏—Ç—å –≤–∞—à–∞ —É—Ç–∏–ª—ñ—Ç–∞, –º–∞—î –±—É—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–º –∑–æ–±—Ä–∞–∂–µ–Ω–æ–º—É –Ω–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç–∞—Ö.
// PS: –ó–∞–≤–¥–∞–Ω–Ω—è –ø—ñ–¥–≤–∏—â–µ–Ω–æ—ó —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ "—ñ–∑ –∑—ñ—Ä–æ—á–∫–æ—é" üôÇ
// –ö—Ä—ñ–º –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è (env vars) –¥–æ–¥–∞—Ç–∫–æ–≤–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —â–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∏—Ö —Å–∞–º–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –¥–æ –ø—Ä–æ–≥—Ä–∞–º–∏ (args) —É –≤–∏–≥–ª—è–¥—ñ flag'—ñ–≤ –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫:
// $ node app.js --limit=100
// (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=1000, LIMIT=100, COLOR=true)
// $ node app.js --rate=500 --limit=100
// (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=500, LIMIT=100, COLOR=true)
// $ node app.js --limit=1000 --rate=2000 --color=false
// (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=2000, LIMIT=1000, COLOR=false)
// $ COLOR=false node app.js --limit=100
// (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=1000, LIMIT=100, COLOR=false)
// $ LIMIT=500 COLOR=false node app.js --limit=100
// (–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ RATE=1000, LIMIT=100, COLOR=false, —Ç–æ–±—Ç–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥–∞—î—Ç—å—Å—è –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º)

const parseArgv = require('../util/parseArgv');
const parseEnvVariables = require('../util/parseEnvVariables');

const defaultParams = {
    rate: 1000,
    limit: 300,
    color: true,
};

const wantedVariables = [
    { key: 'rate', type: 'number' },
    { key: 'limit', type: 'number' },
    { key: 'color', type: 'boolean' },
];

function run() {
    const envVariables = parseEnvVariables(wantedVariables);
    const argvVariables = parseArgv(process.argv, wantedVariables);

    console.log(envVariables);
    console.log(argvVariables);

    const params = { ...defaultParams, ...envVariables, ...argvVariables };

    console.log(params);
}

run();
